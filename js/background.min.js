!function(e){var t=function(){e.get("http://leveldown.fr/api/getStreamer",function(e){e=JSON.parse(e);for(var t={all:0,favorites:0},o=null==localStorage.getItem("favorites")?[]:JSON.parse(localStorage.getItem("favorites")),a=null==localStorage.getItem("online-favorites")?[]:JSON.parse(localStorage.getItem("online-favorites")),r=0;r<e.response.length;r++){var l=e.response[r],i=(l.avatar,l.title_menu,l.slug);l.live?(t.all++,o.indexOf(i)>-1&&(t.favorites++,a.indexOf(i)<0&&(a.push(i),new Notification("Hey, toi !!!",{body:l.title_menu+" est en stream",icon:l.avatar.replace("mini","big")})))):a.indexOf(i)>-1&&a.splice(a.indexOf(i),1)}localStorage.setItem("online-favorites",JSON.stringify(a)),chrome.browserAction.setBadgeBackgroundColor({color:"#00c100"}),chrome.browserAction.setBadgeText({text:"all"==localStorage.getItem("counter")?t.all.toString():t.favorites.toString()})})};setInterval(t,1e4),t()}(jQuery);